<!DOCTYPE html>
<html>
<head>
    <?php $this->load->view('common/header'); ?>
    <style>
        #artist, #member, #member_by_role, #virtual_studio_sec, #products_types, #design_store, #servicesec {
            display: none;
        }

        .loader {
            border: 16px solid #f3f3f3; /* Light grey */
            border-top: 16px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 120px;
            height: 120px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
<?php $this->load->view('common/header_nav'); ?>


<section id="my-account">
    <div class="custom-width">
        <div class="page-heading">
            <h1>Checkout</h1>
        </div>


        <div class="user-right-panel">

            <div class="user-dasbord-area">

                <div class="my-account-left-panel">
                    <div class="my-account-left-panel-sec1 checkoutpage">
                        <div class="accordion" id="accordionExample">

                            <div class="card">
                                <div class="card-header" id="headingzero">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link <?php echo $this->session->userdata('USER_ID') != '' ? 'collapsed' : '' ?>"
                                                type="button" data-toggle="collapse" data-target="#collapsezero"
                                                aria-expanded="false" aria-controls="collapsezero">
                                            Step 1: Checkout Options <i class="fa fa-caret-down" aria-hidden="true"></i>
                                        </button>
                                    </h2>
                                </div>
                                <div id="collapsezero"
                                     class="collapse <?php echo $this->session->userdata('USER_ID') != '' ? '' : 'in' ?>"
                                     aria-labelledby="headingzero" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <?php
                                        if ($this->session->userdata('USER_TYPE') != '4' || $this->session->userdata('USER_ID') == '') {
                                        ?>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <p>New Customer</p>
                                                <span>Checkout Options:</span>
                                                <h6>Register Account </h6>

                                                <span>By creating an account you will be able to shop faster, be up to date on an order's status,
                                                                and keep track of the orders you have previously made.</span>
                                                <a href="<?php echo base_url(); ?>register"
                                                   style="color:#fff; float: left;" class="continue-btn flotchnage">Continue</a>
                                            </div>
                                            <div class="col-sm-6">
                                                            
                                                                <span id="msg_box">
                                                                    <?php if ($this->session->flashdata('success') != '') { ?>
                                                                        <?php echo $this->session->flashdata('success'); ?>
                                                                    <?php } ?>
                                                                </span>


                                                <form action="<?php echo base_url(); ?>checkout-login" method="POST"
                                                      enctype="multipart/form-data">
                                                                <span id="msg_box">
                                                                        <?php if ($this->session->flashdata('error') != '') { ?>
                                                                            <?php echo $this->session->flashdata('error'); ?>
                                                                        <?php } ?>
                                                                    </span>
                                                    <p>Returning Customer</p>
                                                    <span>I am a returning customer</span>
                                                    <div class="form-group">
                                                        <label>Email *</label>

                                                        <input type="text" class="form-control"
                                                               placeholder="Enter Your Email" name="email" id="email"
                                                               required>
                                                        <p class="error_msg"
                                                           id="email_err"><?php echo form_error('email'); ?> </p>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Password *</label>
                                                        <input type="password" class="form-control"
                                                               placeholder="Enter Password" id="pswd" name="pswd"
                                                               required>
                                                        <p class="error_msg"
                                                           id="pswd_err"><?php echo form_error('pswd'); ?> </p>

                                                        <a href="<?php echo base_url(); ?>forgot_password">Forgotten
                                                            Password</a>
                                                    </div>

                                                    <button type="submit" id="loginchk" class="continue-btn flotchnage">
                                                        Login
                                                    </button>
                                                </form>
                                            </div>
                                        </div>

                                    </div>

                                    <?php
                                    } else {
                                        echo "Älready LoggedIn";
                                    }
                                    ?>

                                </div>
                            </div>


                            <?php if ($this->session->userdata('USER_ID') && $this->session->userdata('USER_ID') != '' && $this->session->userdata('USER_TYPE') == '4') { ?>
                                <div class="card">
                                <div class="card-header" id="headingOne">
                                    <h2 class="mb-0">
                                        <button id="billingDetailsTab"
                                                class="btn btn-link <?php echo $this->session->userdata('USER_ID') != '' ? '' : 'collapsed' ?>"
                                                type="button" data-toggle="collapse" data-target="#collapseOne"
                                                aria-expanded="true" aria-controls="collapseOne">
                                            Step 2: Billing Details <i class="fa fa-caret-down" aria-hidden="true"></i>
                                        </button>
                                    </h2>
                                </div>

                            <div id="collapseOne"
                                 class="collapse <?php echo $this->session->userdata('USER_ID') != '' ? 'in' : '' ?>"
                                 aria-labelledby="headingOne" data-parent="#accordionExample">
                                <div class="card-body">
                                <?php
                                if ($this->session->userdata('USER_TYPE') == '4' || $this->session->userdata('USER_ID') != '') {
                                    ?>
                                    <form>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <?php
                                                //print_r($address_data);
                                                if ($address_data->num_rows() > 0) {
                                                    $i = 1;
                                                    foreach ($address_data->result() as $row) {
                                                        ?>
                                                        <div class="delivery-detailsarea-checkoutpage">
                                                            <h6><input type="radio" name="billing_address" <?php
                                                                if ($i == 1) {
                                                                    echo 'checked';
                                                                }
                                                                ?> value="<?php echo $row->id; ?>"> <span
                                                                        class="checkout-detailsaddress"><ul>
                                                                                        <li>Address1
                                                                                            <!--<a href="#">Work</a>--> <?php echo $row->phone; ?></li>
                                                                                        <li><?php echo $row->address2; ?>
                                                                                            <?php echo $row->city; ?>
                                                                                            <?php echo $row->state_name; ?>
                                                                                            <?php echo $row->postcode; ?>
                                                                                            <?php echo $row->country_name; ?></li>
                                                                                    </ul>
                                                                                </span></h6>
                                                        </div>

                                                        <?php
                                                        $i++;
                                                    }
                                                }
                                                ?>

                                                <button type="button" class="btn addressbtncheckout"
                                                        data-toggle="collapse" data-target="#demo">
                                                    <img src="<?php echo base_url(); ?>assets/front/images/plus-black.png"/>
                                                    Add a New Address
                                                </button>


                                            </div>

                                            <div id="demo" class="collapse">

                                                <input type="radio" id="newAdd" name="billing_address" <?php
                                                if ($address_data->num_rows() < 1) {
                                                    echo 'checked';
                                                }
                                                ?> value="new_address"> <span class="checkout-detailsaddress">
                                                                    <div class="col-sm-6">
                                                                        <p>Your Personal Details</p>


                                                                        <div class="form-group">
                                                                            <label>Name *</label>
                                                                            <input type="text" class="form-control"
                                                                                   name="shippingname"
                                                                                   id="shippingname"/>
                                                                        </div>


                                                                        <div class="form-group">
                                                                            <label>Email *</label>
                                                                            <input type="email" class="form-control"
                                                                                   name="shippingemail"
                                                                                   id="shippingemail"/>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label>Phone *</label>
                                                                            <input type="number" class="form-control"
                                                                                   name="shippingphone"
                                                                                   id="shippingphone"/>
                                                                        </div>

                                                                    </div>
                                                                    <div class="col-sm-6">
                                                                        <p>Your Address</p>

                                                                        <!-- <div class="form-group">
                                                                             <label>Company *</label>
                                                                             <input type="text" class="form-control" />
                                                                         </div><div class="form-group">
                                                                             <label>Address 2</label>
                                                                             <input type="text" class="form-control" />
                                                                         </div>
                                                                        -->

                                                                        <div class="form-group">
                                                                            <label>Address 1 *</label>
                                                                            <input type="text" class="form-control"
                                                                                   name="shippingaddress"
                                                                                   id="shippingaddress"/>
                                                                        </div>


                                                                        <div class="form-group">
                                                                            <label>City *</label>
                                                                            <input type="text" class="form-control"
                                                                                   name="shippingcity"
                                                                                   id="shippingcity"/>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label>Post Code *</label>
                                                                            <input type="text" class="form-control"
                                                                                   name="shippingzip" id="shippingzip"/>
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label>Country *</label>

                                                                            <input type="text" class="form-control"
                                                                                   name="shippingcountry"
                                                                                   id="shippingcountry" value=""/>
                                                                            <!--<select class="form-control">
                                                                                <option>Country 1</option>
                                                                                <option>Country 2</option>
                                                                                <option>Country 3</option>
                                                                            </select>-->
                                                                        </div>

                                                                        <div class="form-group">
                                                                            <label>Region / State *</label>
                                                                            <input type="text" name="shippingstate"
                                                                                   class="form-control"
                                                                                   id="shippingstate" value=""/>

                                                                            <!-- <select class="form-control" name="shippingstate">
                                                                                 <option>-- Please Select --</option>
                                                                                 <option>State 1</option>
                                                                                 <option>State 2</option>
                                                                             </select>-->
                                                                        </div>



                                                                    </div>




                                                                    <div class="col-sm-6">

                                                                        <span><input type="checkbox"/> My deivery and billing address are the same</span>
                                                                    </div>

                                            </div>

                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <button type="button" id="billingContinue" class="continue-btn">
                                                        Continue
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                    </div>
                                    </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header" id="headingTwo">
                                            <h2 class="mb-0">
                                                <button id="deliveryDetailsTab" class="btn btn-link collapsed"
                                                        type="button" data-toggle="collapse" data-target="#collapseTwo"
                                                        aria-expanded="false" aria-controls="collapseTwo">
                                                    Step 3: Delivery Details <i class="fa fa-caret-down"
                                                                                aria-hidden="true"></i>
                                                </button>
                                            </h2>
                                        </div>
                                        <div id="collapseTwo" class="collapse " aria-labelledby="headingTwo"
                                             data-parent="#accordionExample">
                                            <div class="card-body">
                                                <form>
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <p>Chose your preferred method of delivery:</p>
                                                            <ul>
                                                                <li><input type="radio" name="1"/> Pickup</li>
                                                                <li><input type="radio" name="1" checked/> Delivery</li>
                                                            </ul>
                                                            <span>Delivery charge will be included for your final billing ammount</span>
                                                            <h5><input type="checkbox" id="copy_address"
                                                                       name="copy_address"> My deivery and billing
                                                                address are the same</h5>
                                                        </div>
                                                    </div>
                                                    <div class="row">

                                                        <div class="col-sm-6">

                                                            <p>Delivery Details</p>

                                                            <div class="form-group">
                                                                <label>Name *</label>
                                                                <input type="text" class="form-control"
                                                                       name="billingname" id="billingname"/>
                                                            </div>


                                                            <div class="form-group">
                                                                <label>Email *</label>
                                                                <input type="email" class="form-control"
                                                                       name="billingemail" id="billingemail"/>
                                                            </div>

                                                            <div class="form-group">
                                                                <label>Phone *</label>
                                                                <input type="number" class="form-control"
                                                                       name="billingphone" id="billingphone"/>
                                                            </div>

                                                        </div>
                                                        <div class="col-sm-6">
                                                            <p>Your Address</p>

                                                            <!-- <div class="form-group">
                                                                 <label>Company *</label>
                                                                 <input type="text" class="form-control" />
                                                             </div><div class="form-group">
                                                                 <label>Address 2</label>
                                                                 <input type="text" class="form-control" />
                                                             </div>
                                                            -->

                                                            <div class="form-group">
                                                                <label>Address 1 *</label>
                                                                <input type="text" class="form-control"
                                                                       name="shippingaddress" id="billingaddress"/>
                                                            </div>


                                                            <div class="form-group">
                                                                <label>City *</label>
                                                                <input type="text" class="form-control"
                                                                       name="billingcity" id="billingcity"/>
                                                            </div>

                                                            <div class="form-group">
                                                                <label>Post Code *</label>
                                                                <input type="text" class="form-control"
                                                                       name="billingzip" id="billingzip"/>
                                                            </div>

                                                            <div class="form-group">
                                                                <label>Country *</label>

                                                                <input type="text" class="form-control"
                                                                       name="billingcountry" id="billingcountry"
                                                                       value=""/>
                                                                <!--<select class="form-control">
                                                                    <option>Country 1</option>
                                                                    <option>Country 2</option>
                                                                    <option>Country 3</option>
                                                                </select>-->
                                                            </div>

                                                            <div class="form-group">
                                                                <label>Region / State *</label>
                                                                <input type="text" name="billingstate"
                                                                       class="form-control" id="billingstate" value=""/>

                                                                <!-- <select class="form-control" name="shippingstate">
                                                                     <option>-- Please Select --</option>
                                                                     <option>State 1</option>
                                                                     <option>State 2</option>
                                                                 </select>-->
                                                            </div>

                                                            <div class="form-group">
                                                                <button class="continue-btn" type="button"
                                                                        id="deliveryContinue">Continue
                                                                </button>
                                                            </div>


                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="card">
                                    <div class="card-header" id="headingThree">
                                        <h2 class="mb-0">
                                            <button id="confirmOrderTab" class="btn btn-link collapsed" type="button"
                                                    data-toggle="collapse" data-target="#collapseFour"
                                                    aria-expanded="false" aria-controls="collapseFour">
                                                Step 4: Confirm Order <i class="fa fa-caret-down"
                                                                         aria-hidden="true"></i>
                                            </button>
                                        </h2>
                                    </div>
                                    <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordionExample">
                                    <div class="card-body">
                                    <div class="cart conform-order">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                <tr>
                                                    <th>Product Name</th>
                                                    <th>Model</th>
                                                    <th style="text-align: center;">Quantity</th>
                                                    <th>Price</th>

                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>

                                                    <td>MODERN LAMP</td>
                                                    <td>DSD007SCB1</td>
                                                    <td style="text-align: center;">1</td>
                                                    <td>€95.00</td>


                                                </tr>
                                                <tr>

                                                    <td>MODERN LAMP</td>
                                                    <td>DSD007SCB1</td>
                                                    <td style="text-align: center;">1</td>
                                                    <td>€95.00</td>


                                                </tr>

                                                </tbody>
                                            </table>
                                        </div>


                                        <div class="col-sm-4 col-md-offset-8 btnone">
                                            <div class="row">
                                                <div class="table-responsive">
                                                    <table class="table">
                                                        <tbody>
                                                        <tr>
                                                            <td><b>Subtotal</b></td>
                                                            <td style="text-align:right;">€239.00</td>
                                                        </tr>

                                                        <tr>
                                                            <td><b>Tax</b></td>
                                                            <td style="text-align:right;">€0.00</td>
                                                        </tr>


                                                        <tr class="borderbnone">
                                                            <td class="borderbnone"><b>Total</b></td>
                                                            <td class="borderbnone" style="text-align:right;">€239.00
                                                            </td>
                                                        </tr>

                                                        </tbody>
                                                    </table>
                                                    <button class="continue-btn">Confirm</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <?php
                                }
                                ?>


                                </div>
                                </div>
                                </div>


                                <div class="card">
                                    <div class="card-header" id="headingThree">
                                        <h2 class="mb-0">
                                            <button id="paymentMethodTab" class="btn btn-link collapsed" type="button"
                                                    data-toggle="collapse" data-target="#collapseThree"
                                                    aria-expanded="false" aria-controls="collapseThree">
                                                Step 5: Payment Method <i class="fa fa-caret-down"
                                                                          aria-hidden="true"></i>
                                            </button>
                                        </h2>
                                    </div>
                                    <div id="collapseThree" class="collapse" aria-labelledby="headingThree"
                                         data-parent="#accordionExample">
                                        <div class="card-body">
                                            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry
                                            richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard
                                            dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon
                                            tempor, sunt aliqua put a bird on it squid single-origin coffee nulla
                                            assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore
                                            wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher
                                            vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic
                                            synth nesciunt you probably haven't heard of them accusamus labore
                                            sustainable VHS.
                                            <div class="form-group">
                                                <button class="continue-btn" type="button" id="paymentContinue">Confirm
                                                    Order
                                                </button>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            <?php } ?>
                        </div>

                    </div>

                </div>

            </div>


        </div>


    </div>
</section>


<div class="clearfix"></div>

<?php $this->load->view('common/footer'); ?>
</body>
<?php $this->load->view('common/footer_js'); ?>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>

    $(document).ready(function () {

        $('#goReg').on('click', function () {
            $("#goRegLink").click();
        });


        console.log("ready!");
        $('.addressbtncheckout').on('click', function () {
            $("#newAdd").click();
        });
        $('#billingContinue').on('click', function () {

            //if ($('#role_id').val() == '6') {
            var email = $('#subemail').val();

            $.ajax({
                type: "POST",
                url: "<?php echo base_url('add_shippingaddress'); ?>",
                data: {email: email},
                async: false,
                success: function (response) {

                    if (response == 'sent') {
                        $("#newAdd").click();
                    }
                }

            });
        });
        $('#billingContinue').on('click', function () {
            $("#billingDetailsTab").click();
            $("#deliveryDetailsTab").click();
        });
        $('#deliveryContinue').on('click', function () {
            $("#deliveryDetailsTab").click();
            $("#paymentMethodTab").click();
        });
        $('#paymentContinue').on('click', function () {
            $("#paymentMethodTab").click();
            $("#confirmOrderTab").click();
        });
    });


    function isEmail(email) {
        var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        return regex.test(email);
    }

    $('#loginchk').on('click', function () {
        $(".error_msg").html('');

        if ($('#email').val() == '') {
            $('#email').next(".error_msg").html('Please enter email id ');
            $('#email').focus();
            return false;
        }
        if (!isEmail($('#email').val())) {
            $('#email').next(".error_msg").html('Please enter a valid email id ');
            $('#email').focus();
            return false;

        }
        if ($('#pswd').val() == '') {
            $('#pswd').next(".error_msg").html('Please enter password');
            $('#pswd').focus();
            return false;
        }

        /*if ($('#pswd').val().length < parseInt('8')) {
         $('#pswd').next(".error_msg").html('Please enter eight or more characters');
         $('#pswd').focus();
         return false;
         }*/


    });
</script>


<script type="text/javascript">
    $(document).ready(function () {
        $('#copy_address').click(function () {
            if ($('input[name="copy_address"]').is(':checked')) {
                $('#billingname').val($('#shippingname').val());
                $('#billingemail').val($('#shippingemail').val());
                $('#billingaddress').val($('#shippingaddress').val());
                $('#billingcity').val($('#shippingcity').val());
                $('#billingstate').val($('#shippingstate').val());
                $('#billingcountry').val($('#shippingcountry').val());
                $('#billingzip').val($('#shippingzip').val());
                $('#billingphone').val($('#shippingphone').val());
            } else {
                $('#shippingname').val("");
                $('#shippingemail').val("");
                $('#shippingaddress').val("");
                $('#shippingcity').val("");
                $('#shippingstate').val("");
                $('#shippingcountry').val("");
                $('#shippingzip').val("");
                $('#shippingphone').val("");
            }


        });
    });
</script>
</body>
</html>